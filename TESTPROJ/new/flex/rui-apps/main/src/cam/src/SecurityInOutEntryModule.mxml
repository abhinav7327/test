<?xml version="1.0" encoding="utf-8"?>
<containers:XenosEntryModule xmlns:mx="http://www.adobe.com/2006/mxml" 
                             xmlns:containers="com.nri.rui.core.containers.*" 
                             xmlns:frmtrs="com.nri.rui.core.formatters.*" 
                             xmlns:flexlib="http://code.google.com/p/flexlib/" 
                             xmlns:cntrls="com.nri.rui.core.controls.*" 
                             xmlns:xenospopup="com.nri.rui.ref.popupImpl.*" 
                             layout="vertical" percentWidth="100" percentHeight ="100" 
                             horizontalScrollPolicy="off" verticalScrollPolicy="off" 
                             xmlns:valdtrs="com.nri.rui.core.validators.*">
    <mx:Script>
        <![CDATA[
            import com.nri.rui.core.Globals;
        ]]>
    </mx:Script>
    
    <mx:Script source="actionscripts/SecurityInOut.as"/>
     
    <containers:states>
        <mx:State name="result">
            <mx:SetProperty target="{qry}" name="width" value="0%"/>
            <mx:SetProperty target="{rslt}" name="width" value="100%"/>
        </mx:State>
        <mx:State name="entryState">
            <mx:SetProperty target="{qry}" name="width" value="100%"/>
            <mx:SetProperty target="{rslt}" name="width" value="0%"/>
        </mx:State>
    </containers:states>
    <!-- Define Transition array with one Transition object.-->
    <containers:transitions>
        <!-- A transition for changing from any state to any state. -->
        <mx:Transition id="qryTransition" fromState="*" toState="*">
            <!-- Define a Parallel effect as the top-level effect.-->
            <mx:Parallel id="t1" targets="{[qry,rslt]}">
                <!-- Define a Move and Resize effect.-->
                <mx:Move  duration="400"/>
                <!--<mx:Resize duration="400"/>-->
            </mx:Parallel>
        </mx:Transition>
    </containers:transitions>
    
    <cntrls:XenosHTTPService id="loadBankAndBankAccountForFund" fault="XenosAlert.error('Error Occured  :  ' + event.fault.faultDetail)" url="cam/camSecurityEntryDispatch.action?method=loadBankAndBankAccount"
             result="populateBankAndBankAccount(event)" showBusyCursor="true" resultFormat="xml"/>
    <cntrls:XenosHTTPService id="loadBankAndBankAccountForFundForOut" fault="XenosAlert.error('Error Occured  :  ' + event.fault.faultDetail)" url="cam/camSecurityOutEntryDispatch.action?method=loadBankAndBankAccount"
             result="populateBankAndBankAccount(event)" showBusyCursor="true" resultFormat="xml"/>
    <cntrls:XenosHTTPService id="onClickBookValueGenerate" fault="XenosAlert.error('Error Occured  :  ' + event.fault.faultDetail)" url="cam/camSecurityEntryDispatch.action?"
             result="populateWithBookValueGenerated(event)" showBusyCursor="true" resultFormat="xml"/> 
      <cntrls:XenosHTTPService id="onClickBookValueBCGenerate" fault="XenosAlert.error('Error Occured  :  ' + event.fault.faultDetail)" url="cam/camSecurityEntryDispatch.action?"
             result="populateWithBookValueBCGenerated(event)" showBusyCursor="true" resultFormat="xml"/>
     <cntrls:XenosHTTPService id="onClickAccruedIntBCGenerate" fault="XenosAlert.error('Error Occured  :  ' + event.fault.faultDetail)" url="cam/camSecurityEntryDispatch.action?"
             result="populateAcruedIntPaidBCGenerated(event)" showBusyCursor="true" resultFormat="xml"/>                             
                                  
      
    <frmtrs:XenosNumberFormatter id="numberFormatter" 
        useThousandsSeparator="true" />
    <valdtrs:XenosNumberValidator id="numValQty" 
                                  source="{quantity}" 
                                  property="text" 
                                  allowNegative="false" 
                                  domain="real" 
                                  negativeError="Quantity cannot be negative"
                                  invalidCharError="Please enter a valid value for Quantity" 
                                     exceedsMaxError="15 digits are allowed before decimal point"                                     
                                  separationError=""
                                  lowerThanMinError="" 
                                  maxValue="999999999999999" 
                                  minValue="" 
                                  invalidFormatCharsError="Please enter a valid value for Quantity" 
                                  decimalPointCountError="Please enter a valid value for Quantity" 
                                  precision="3" 
                                  precisionError="3 digits are allowed after decimal point" />
    <valdtrs:XenosNumberValidator id="numValBookValue" 
                                  source="{bookValueStr}" 
                                  property="text" 
                                  allowNegative="false" 
                                  domain="real" 
                                  negativeError="Book Value cannot be negative"
                                  invalidCharError="Please enter a valid value for Book Value" 
                                     exceedsMaxError="15 digits are allowed before decimal point"                                     
                                  separationError=""
                                  lowerThanMinError="" 
                                  maxValue="999999999999999" 
                                  minValue="" 
                                  invalidFormatCharsError="Please enter a valid value for Book Value" 
                                  decimalPointCountError="Please enter a valid value for Book Value" 
                                  precision="3" 
                                  precisionError="3 digits are allowed after decimal point" />
                                  
    <valdtrs:XenosNumberValidator id="numValaAcruedIntPaidBc" 
                                  source="{accruedIntPaidBcStr}" 
                                  property="text" 
                                  allowNegative="false" 
                                  domain="real" 
                                  required="false"
                                  negativeError="BC Accrued Int paid cannot be negative"
                                  invalidCharError="Please enter a valid value for BC Accrued Int paid" 
                                     exceedsMaxError="15 digits are allowed before decimal point"                                     
                                  separationError=""
                                  lowerThanMinError="" 
                                  maxValue="999999999999999" 
                                  minValue="" 
                                  invalidFormatCharsError="Please enter a valid value for BC Accrued Int paid" 
                                  decimalPointCountError="Please enter a valid value for BC Accrued Int paid" 
                                  precision="3" 
                                  precisionError="3 digits are allowed after decimal point" />
<valdtrs:XenosNumberValidator id="numValaAcruedIntPaid" 
                                  source="{accruedIntPaidLcStr}" 
                                  property="text" 
                                  allowNegative="false" 
                                  domain="real" 
                                  required="false"
                                  negativeError="Accrued Int paid cannot be negative"
                                  invalidCharError="Please enter a valid value for Accrued Int paid" 
                                    exceedsMaxError="15 digits are allowed before decimal point"                                     
                                  separationError=""
                                  lowerThanMinError="" 
                                  maxValue="999999999999999" 
                                  minValue="" 
                                  invalidFormatCharsError="Please enter a valid value for Accrued Int paid" 
                                  decimalPointCountError="Please enter a valid value for Accrued Int paid" 
                                  precision="3" 
                                  precisionError="3 digits are allowed after decimal point" />
<valdtrs:XenosNumberValidator id="numValBookValuebc" 
                                  source="{bookValueBcStr}" 
                                  property="text" 
                                  allowNegative="false" 
                                  domain="real" 
                                  required="false"
                                  negativeError="BC Book Value cannot be negative"
                                  invalidCharError="Please enter a valid value for BC Book Value" 
                                     exceedsMaxError="15 digits are allowed before decimal point"                                     
                                  separationError=""
                                  lowerThanMinError="" 
                                  maxValue="999999999999999" 
                                  minValue="" 
                                  invalidFormatCharsError="Please enter a valid value for BC Book Value" 
                                  decimalPointCountError="Please enter a valid value for BC Book Value" 
                                  precision="3" 
                                  precisionError="3 digits are allowed after decimal point" />                                                                    
        
    <mx:Validator source="{fundActPopUp.accountNo}" required="true" property="text" />  
    <mx:Validator source="{bankPopUp.finInstCode}" required="true" property="text" />
    <mx:Validator source="{actPopUp.accountNo}" required="true" property="text" />
    <mx:Validator source="{security.instrumentId}" required="true" property="text" />
    <mx:Validator source="{inOutDateStr}" required="true" property="text" />          
    <mx:Validator source="{adjustmentreason}" id="adjrsn" required="false" property="value" />        

    <mx:Canvas width="100%" height="100%" horizontalScrollPolicy="auto"  verticalScrollPolicy="auto">
      <mx:VBox width="100%" height="100%">
        <mx:ViewStack id="vstack" width="100%" height="100%" creationComplete="loadAll()" creationPolicy="all" >
        <!--<mx:HBox id="hdbox1" width="100%" height="100%" styleName="Padding4" creationComplete="loadAll()"  >-->
        <!--<containers:CollapsibleHDividedBox id="hdbox1" width="100%" height="100%" x="0" y="0" creationComplete="initPageStart()" paddingBottom="6" paddingLeft="6" paddingRight="6" paddingTop="6" >-->
        
        <mx:Canvas id="qry" width="100%" height="100%" horizontalScrollPolicy="auto" verticalScrollPolicy="auto">
        <mx:VBox label="Entry Criteria" width="100%" height="100%" >
            <mx:Label id="initLabel" text="{this.parentApplication.xResourceManager.getKeyValue('cam.label.security.entry')}" fontWeight="bold"/>
            <cntrls:XenosErrors id="errPage" width="100%" color="#FF0000" backgroundAlpha="0" borderStyle="none"/>
            <mx:HBox id="uWarnLabel" styleName="ButtonBackPanel" verticalGap="0" horizontalGap="0" width="100%" height="32" verticalAlign="middle" includeInLayout="false" visible="false">
                <mx:Image id="uWarnfImg" source="@Embed('../../assets/themes/default/skin/alert_info.png')" width="28" height="28" verticalAlign="middle"/>
                <mx:Label id="usrWarnMessage" color="red" textAlign="left" fontWeight="bold" text="" width="100%" selectable="true"/>            
            </mx:HBox>            
            <mx:HRule strokeColor="#d2d9dc" strokeWidth="1" width="100%" />
            <!--<flexlib:WindowShade id="ws1" tabChildren="{ws1.opened=false}" styleName="linkButtonWindowShade" label="Optional Fields - Group 1" width="100%">-->
            <mx:Grid width="100%" borderThickness="0" id="entryForm">
                    <mx:GridRow width="100%">
                        <mx:GridItem width="20%" borderThickness="0">
                               <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('cam.securityinentry.label.fundaccountno')}" styleName="ReqdLabel"/>
                        </mx:GridItem>
                        <mx:GridItem width="80%" borderThickness="0" colSpan="3">
                            <xenospopup:AccountPopUpHbox id="fundActPopUp" inputEvent="inputHandler()" retContextItem="{returnContextItem}" recContextItem="{populateContext()}"/>
                            <cntrls:XenosLabel id="fundaccountname" toolTip="{fundaccountname.text}" isWrapReq="false" width="100%"/>
                        </mx:GridItem>                      
                    </mx:GridRow>    
                        <mx:GridRow width="100%">
                            <mx:GridItem width="20%" borderThickness="0">
                            <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('cam.securityinentry.label.custodianbank')}" styleName="ReqdLabel"/>
                            <xenospopup:OurBankListPopUpButton id="ourBankPopup" label="List" retContextItem="{returnContextItem}" mouseDown="populateOurBankContext()" creationComplete="{ourBankPopup.bankCode=bankPopUp.finInstCode; ourBankPopup.settleAc=actPopUp.accountNo; ourBankPopup.fundAcNo = fundActPopUp.accountNo.text}" /> 
                        </mx:GridItem>                        
                        <mx:GridItem width="80%" borderThickness="0" colSpan="3">
                            <xenospopup:FinInstitutePopUpHbox id="bankPopUp" recContextItem="{populateFinInstRole()}"/>
                            <cntrls:XenosLabel id="custodianbankname" toolTip="{custodianbankname.text}" isWrapReq="false" width="100%"/>
                        </mx:GridItem>     
                    </mx:GridRow>    
                        <mx:GridRow width="100%">
                            <mx:GridItem width="20%" borderThickness="0">
                            <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('cam.securityinentry.label.oursettleac')}" styleName="ReqdLabel"/>
                        </mx:GridItem>
                        <mx:GridItem width="80%" borderThickness="0" >
                            <xenospopup:AccountPopUpHbox id="actPopUp" 
                            retContextItem="{returnContextItem}" 
                            recContextItem="{populateSettleAccountContext()}" />
                            <cntrls:XenosLabel id="oursettleacname" toolTip="{oursettleacname.text}" isWrapReq="false" width="100%"/>
                        </mx:GridItem> 
                        <mx:GridItem width="20%" borderThickness="0">
                            <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('cam.security.label.accruedinterestpaidlc')}" />
                        </mx:GridItem>
                        <mx:GridItem width="30%" borderThickness="0">                            
                            <mx:TextInput id="accruedIntPaidLcStr" focusOut="numValaAcruedIntPaid.handleNumericField(numberFormatter)" />
                        </mx:GridItem> 
                        
                    </mx:GridRow>
                   <mx:GridRow width="100%">
                        <mx:GridItem width="20%" borderThickness="0">
                            <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('cam.securityinentry.label.securitycode')}" styleName="ReqdLabel"/>
                        </mx:GridItem>
                        <mx:GridItem width="80%" borderThickness="0" colSpan="3">
                            <xenospopup:InstrumentPopUpHbox id="security"/>     
                            <cntrls:XenosLabel id="securityname" toolTip="{securityname.text}" isWrapReq="false" width="100%"/>                     
                        </mx:GridItem>
                    </mx:GridRow>
                   <mx:GridRow width="100%">
                        <mx:GridItem width="20%" borderThickness="0">
                            <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('cam.securityinentry.label.quantity')}" styleName="ReqdLabel" />
                        </mx:GridItem>
                        <mx:GridItem  width="80%" borderThickness="0" colSpan="3">
                            <mx:TextInput id="quantity" text="" width="100" focusOut="numValQty.handleNumericField(numberFormatter)"/>
                        </mx:GridItem>                   
                        
                    </mx:GridRow>
                     <mx:GridRow width="100%">
                         <mx:GridItem width="20%" borderThickness="0">
                            <mx:Label id="lblInOutDateStr" text="{this.parentApplication.xResourceManager.getKeyValue('cam.securityinentry.label.securityindate')}"/>
                        </mx:GridItem>
                        <mx:GridItem width="80%" borderThickness="0" >
                            <mx:DateField id="inOutDateStr"  formatString="YYYYMMDD" editable="true" width="90"/>
                        </mx:GridItem>
                        <mx:GridItem width="20%" borderThickness="0">
                            <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('cam.security.label.bookvaluelc')}" styleName="ReqdLabel"/>
                            <mx:Button label="Generate" click="generateBookValue()"/>
                        </mx:GridItem>
                        <mx:GridItem width="30%" borderThickness="0">                            
                            <mx:TextInput id="bookValueStr" focusOut="numValBookValue.handleNumericField(numberFormatter)" maxChars="{this.CAMENTRY_REMARKS_LENGTH}"/>
                        </mx:GridItem>   
                         
                    </mx:GridRow>    
                    
                    <mx:GridRow width="100%">
                        <!--<mx:GridItem width="20%" borderThickness="0">  
                            <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('cam.security.label.gleledgercode')}"/>
                        </mx:GridItem>
                        <mx:GridItem width="30%" borderThickness="0">
                            <mx:ComboBox id="gleledger" labelField="label" prompt="Select"/>
                           </mx:GridItem> -->                       
                        <mx:GridItem width="20%" borderThickness="0">  
                            <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('cam.securityinentry.label.adjustmentreason')}"  styleName="ReqdLabel"/>
                        </mx:GridItem>
                        <mx:GridItem  width="30%" borderThickness="0">
                            <mx:ComboBox id="adjustmentreason" labelField="label" prompt="Select" click="adjrsn.required=true;"/>
                        </mx:GridItem>
                    </mx:GridRow>
                    <mx:GridRow width="100%">
                        <mx:GridItem width="20%" borderThickness="0">
                            <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('cam.securityinentry.label.remarks')}" />
                        </mx:GridItem>
                        <mx:GridItem width="80%" borderThickness="0" colSpan="3">
                           <mx:TextInput id="remarks" toolTip="{this.remarks.text}" width="60%" maxChars="{this.CAMENTRY_REMARKS_LENGTH}"/>
                        </mx:GridItem>                                                   
                    </mx:GridRow>
                    
                    <mx:GridRow width="100%">
                            <mx:GridItem width="20%" borderThickness="0" >
                                <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('cam.securityinentry.label.statement')}" />
                            </mx:GridItem>
                            <mx:GridItem width="80%" borderThickness="0" colSpan="3">
                               <mx:TextInput id="description" toolTip="{this.remarks.text}" width="80%" maxChars="400"/>
                            </mx:GridItem>                                                   
                    </mx:GridRow>                    
                </mx:Grid>
                 <flexlib:WindowShade id="ws1" tabChildren="{ws1.opened}" label="{this.parentApplication.xResourceManager.getKeyValue('cam.form.label.lessimportant.fields')}" opened="false" width="100%">
	
				                 <mx:Grid width="100%" borderThickness="0">
				                 
		                                      <mx:GridRow>
										        <mx:GridItem width="20%" borderThickness="0">
									                       <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('cam.security.label.sptcalculationdate')}"/>
									           </mx:GridItem>
	                                         <mx:GridItem width="80%" borderThickness="0" colSpan="3">
									                    <mx:DateField id="spotCalcDateStr"  formatString="YYYYMMDD" editable="true" width="90"/>
									         </mx:GridItem>
									         </mx:GridRow>			                 
						                 <mx:GridRow >
							                 <mx:GridItem width="20%" borderThickness="0">
					                            <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('cam.security.label.bookvaluebc')}"/>
					                             <mx:Button label="Generate" click="generateBookValueBC()"/>
					                        </mx:GridItem>
					                        <mx:GridItem width="30%" borderThickness="0"> 
					                            <mx:TextInput id="bookValueBcStr" focusOut="numValBookValuebc.handleNumericField(numberFormatter)" maxChars="{this.CAMENTRY_REMARKS_LENGTH}" />
					                        </mx:GridItem> 
				                       </mx:GridRow> 
			                        
										   <mx:GridRow>
										       <mx:GridItem width="20%" borderThickness="0">
											                   <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('cam.security.label.accruedinterestpaidbc')}"/>
											                   <mx:Button label="Generate" click="calculateAccruedIntPaidBC()"/>
											                  </mx:GridItem>
											                <mx:GridItem width="30%" borderThickness="0">                            
											                  <mx:TextInput id="accruedIntPaidBcStr" focusOut="numValaAcruedIntPaidBc.handleNumericField(numberFormatter)" maxChars="{this.CAMENTRY_REMARKS_LENGTH}"  />
											  </mx:GridItem>
									      </mx:GridRow>
										 
					                     </mx:Grid>
	                 </flexlib:WindowShade>
                <mx:Grid id="amendForm" verticalGap="0" horizontalGap="0" width="100%" includeInLayout="false" visible="false">
                     <mx:GridRow width="100%">
                        <mx:GridItem width="20%" styleName="LabelBgColor">
                            <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('cam.securityinentry.label.referenceno')}" styleName="FormLabelHeading"/>
                        </mx:GridItem>
                        <mx:GridItem width="30%">
                           <mx:Label id="amendRefNo" text=""/>
                        </mx:GridItem>  
                        <mx:GridItem width="20%" styleName="LabelBgColor"/>
                        <mx:GridItem width="30%" />
                    </mx:GridRow>
                    <mx:GridRow width="100%">
                        <mx:GridItem width="20%" styleName="LabelBgColor">
                            <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('cam.securityinentry.label.fundaccountno')}" styleName="FormLabelHeading"/>
                        </mx:GridItem>
                        <mx:GridItem width="30%">
                            <mx:Label id="amendFundAccount"  text=""/>
                        </mx:GridItem>
                        <mx:GridItem width="20%" styleName="LabelBgColor">
                            <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('cam.securityinentry.label.fundaccountname')}" styleName="FormLabelHeading"/>
                        </mx:GridItem>
                        <mx:GridItem width="30%">
                            <cntrls:XenosLabel id="amendFundAccountName"  text="" isWrapReq="true" width="400"/>
                        </mx:GridItem>                         
                    </mx:GridRow>  
                    <mx:GridRow width="100%">
                       <mx:GridItem width="20%" styleName="LabelBgColor">
                            <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('cam.securityinentry.label.custodianbank')}" styleName="FormLabelHeading"/>
                        </mx:GridItem>
                        <mx:GridItem width="30%" >
                            <mx:Label id="amendCustBank"  text=""/> 
                        </mx:GridItem>
                       <mx:GridItem width="20%" styleName="LabelBgColor">
                            <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('cam.securityinentry.label.custodianbankname')}" styleName="FormLabelHeading"/>
                        </mx:GridItem>
                        <mx:GridItem width="30%" >
                            <cntrls:XenosLabel id="amendCustBankName"  text="" isWrapReq="true" width="400"/>
                        </mx:GridItem> 
                    </mx:GridRow>
                    <mx:GridRow width="100%">   
                         <mx:GridItem width="20%" styleName="LabelBgColor">
                            <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('cam.securityinentry.label.oursettleac')}" styleName="FormLabelHeading"/>
                        </mx:GridItem>
                        <mx:GridItem width="30%" >
                            <mx:Label id="amendOurSettleAc"  text=""/>                          
                        </mx:GridItem>   
                         <mx:GridItem width="20%" styleName="LabelBgColor">
                            <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('cam.securityinentry.label.oursettleacname')}" styleName="FormLabelHeading"/>
                        </mx:GridItem>
                        <mx:GridItem width="30%" >     
                            <cntrls:XenosLabel id="amendOurSettleAcName"  text="" isWrapReq="true" width="400"/>                     
                        </mx:GridItem> 
                    </mx:GridRow>   
                    <mx:GridRow width="100%">
                        <mx:GridItem width="20%" styleName="LabelBgColor">
                            <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('cam.securityinentry.label.securitycode')}" styleName="FormLabelHeading"/>
                        </mx:GridItem>
                        <mx:GridItem width="30%">                                
                            <mx:Label id="amendSecurity"  text=""/>                        
                        </mx:GridItem>
                        <mx:GridItem width="20%" styleName="LabelBgColor">
                            <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('cam.securityinentry.label.securityname')}" styleName="FormLabelHeading"/>
                        </mx:GridItem>
                        <mx:GridItem width="30%">        
                            <cntrls:XenosLabel id="amendSecurityName"  text="" isWrapReq="true" width="400"/>                 
                        </mx:GridItem>  
                    </mx:GridRow>
                    <mx:GridRow width="100%">
                        <mx:GridItem width="20%" styleName="LabelBgColor">
                            <mx:Label id="lblAmendSecInDate" text="" styleName="FormLabelHeading"/>
                        </mx:GridItem>
                        <mx:GridItem width="30%">
                            <mx:Label id="amendSecInDate"  text=""/>
                        </mx:GridItem>
                        <mx:GridItem width="20%" styleName="LabelBgColor">
                            <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('cam.securityinentry.label.quantity')}" styleName="FormLabelHeading"/>
                        </mx:GridItem>
                        <mx:GridItem width="30%">
                           <mx:Label id="amendQuantity" text=""/>
                        </mx:GridItem>                         
                    </mx:GridRow>
                    
                    <mx:GridRow width="100%">
                    	<mx:GridItem width="20%" styleName="LabelBgColor">
                            <mx:Label id="lblAmendAdjustmentreason" text="" styleName="FormLabelHeading"/>
                        </mx:GridItem>
                        <mx:GridItem width="30%">                            
                            <mx:ComboBox id="amendAdjustmentreason" labelField="label" prompt="Select"/>                             
                        </mx:GridItem>
                    	
                 
                    
                     </mx:GridRow>    
                        <mx:GridRow width="100%">
                            <mx:GridItem width="20%" styleName="LabelBgColor">
                                <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('cam.cashsecurity.label.issueccy')}" styleName="FormLabelHeading"/>
                            </mx:GridItem>
                            <mx:GridItem width="30%">
                               <mx:Label id="amendIssueCcy" text=""/>
                            </mx:GridItem>  
                            <mx:GridItem width="20%" styleName="LabelBgColor">
                              <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('cam.cashsecurity.label.baseccy')}" styleName="FormLabelHeading"/>
                            </mx:GridItem>
                            <mx:GridItem width="30%" >
                               <mx:Label id="amendBaseCcy" text=""/>
                            </mx:GridItem>
                    </mx:GridRow>
                    
                    
                   <mx:GridRow width="100%">
                        <mx:GridItem width="20%" styleName="LabelBgColor">
                            <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('cam.security.label.bookvaluelc')}" styleName="FormLabelHeading"/>
                        </mx:GridItem>
                        <mx:GridItem width="30%">
                            <mx:Label id="amendBookValue"  text=""/>                            
                        </mx:GridItem>
                        <mx:GridItem width="20%" styleName="LabelBgColor">
                        	<mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('cam.security.label.bookvaluebc')}" styleName="FormLabelHeading"/>
                        </mx:GridItem>
                        <mx:GridItem>
                        	 <mx:Label id="amendBookValueBC"  text=""/>  
                        </mx:GridItem>
                    </mx:GridRow>   
                    
                    <mx:GridRow width="100%">
                    	<mx:GridItem width="20%" styleName="LabelBgColor">
                    	   <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('cam.security.label.accruedinterestpaidlc')}" styleName="FormLabelHeading"/>
                    	</mx:GridItem>
                    	<mx:GridItem>
                    		<mx:Label id="amendAccruedIntLc" text=""/>
                    	</mx:GridItem>
                    	
                    	<mx:GridItem width="20%" styleName="LabelBgColor">
                    	   <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('cam.security.label.accruedinterestpaidbc')}" styleName="FormLabelHeading"/>
                    	</mx:GridItem>
                    	<mx:GridItem>
                    		<mx:Label id="amendAccruedIntBc" text=""/>
                    	</mx:GridItem>
                    </mx:GridRow>
                     
                    <mx:GridRow width="100%">
                        <mx:GridItem width="20%" styleName="LabelBgColor">
                            <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('cam.cashsecurity.label.debitledger')}" styleName="FormLabelHeading"/>
                        </mx:GridItem>
                        <mx:GridItem width="30%">
                           <mx:Label id="amendDebitLedger" text=""/>
                        </mx:GridItem>   
                       <mx:GridItem width="20%" styleName="LabelBgColor">
                            <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('cam.cashsecurity.label.creditledger')}" styleName="FormLabelHeading"/>
                        </mx:GridItem>
                        <mx:GridItem width="30%">
                           <mx:Label id="amendCreditLedger" text=""/>
                        </mx:GridItem>
                    </mx:GridRow>
                   
                     
                   <!-- </mx:GridRow>    
                        <mx:GridRow width="100%">
                            <mx:GridItem width="20%" styleName="LabelBgColor">
                                <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('cam.cashsecurity.label.issueccy')}" styleName="FormLabelHeading"/>
                            </mx:GridItem>
                            <mx:GridItem width="30%">
                               <mx:Label id="amendIssueCcy" text=""/>
                            </mx:GridItem>  
                            <mx:GridItem width="20%" styleName="LabelBgColor"/>
                            <mx:GridItem width="30%" />
                    </mx:GridRow>-->
                    <mx:GridRow width="100%">
                            <mx:GridItem width="20%" styleName="LabelBgColor">
                                <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('cam.securityinentry.label.remarks')}" styleName="FormLabelHeading"/>
                            </mx:GridItem>
                            <mx:GridItem width="30%">
                               <mx:TextInput id="amendRemarks"  width="80%" text="" maxChars="{this.CAMENTRY_REMARKS_LENGTH}"/>
                            </mx:GridItem>
                            <mx:GridItem width="20%" styleName="LabelBgColor" >
                            	<mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('cam.security.label.sptcalculationdate')}" styleName="FormLabelHeading"/>
                            </mx:GridItem>
                            <mx:GridItem width="30%">
                            	<mx:Label id="amendSpotCalcDate"  text="" />
                            </mx:GridItem>
                           
                    </mx:GridRow>
                    <mx:GridRow width="100%">
                            <mx:GridItem width="20%" styleName="LabelBgColor">
                                <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('cam.securityinentry.label.statement')}" styleName="FormLabelHeading"/>
                            </mx:GridItem>
                            <mx:GridItem width="30%">
                               <mx:TextInput id="amendStmtDesc"  text="" maxChars="400"/>
                            </mx:GridItem>   
                            <mx:GridItem width="20%" styleName="LabelBgColor">
                            	<mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('cam.security.label.calculatedspotrate')}" styleName="FormLabelHeading"/> 
                            </mx:GridItem>  
                           <mx:GridItem width="30%">
                           	 <mx:Label id="amendCalcSpotRate"  text="" />
                           </mx:GridItem>                        
                    </mx:GridRow>
                 </mx:Grid>

            <mx:HBox width="100%" styleName="ButtonBackPanel">
                  <cntrls:XenosButton label="{this.parentApplication.xResourceManager.getKeyValue('inf.form.button.label.submit')}" id="submit" styleName="BtnStyle" click="{this.mode == 'entry' ?  this.dispatchEvent(new Event('entrySave')) :  this.dispatchEvent(new Event('amendEntrySave'))}" />
               <mx:Button label="{this.parentApplication.xResourceManager.getKeyValue('inf.form.button.label.reset')}" styleName="BtnStyle" click ="{this.mode == 'entry' ?  this.dispatchEvent(new Event('entryReset')) : this.dispatchEvent(new Event('amendEntryReset'))}"/>
            </mx:HBox>

        </mx:VBox>
        
        </mx:Canvas>
                
        <mx:VBox width="100%" height="100%" id="rslt" horizontalScrollPolicy="auto" verticalScrollPolicy="auto" styleName="HDivideStyle" >  
		  <cntrls:XenosErrors id="errPageCancel" width="100%" color="#FF0000" backgroundAlpha="0" borderStyle="none" includeInLayout="false" visible="false"/>
          <mx:HBox id="uConfLabel" styleName="ButtonBackPanel" verticalGap="0" horizontalGap="0" width="100%" height="32" verticalAlign="middle" includeInLayout="false" visible="false">
              <mx:Image id="uConfImg" source="@Embed('../../assets/themes/default/skin/alert_info.png')" width="28" height="28" verticalAlign="middle"/>
              <mx:Label id="usrCnfMessage" textAlign="left" fontWeight="bold" text="{this.parentApplication.xResourceManager.getKeyValue('cam.label.cancel.records.confirmation')}" width="100%" selectable="true"/>            
          </mx:HBox>
          <mx:HBox id="outBalConfLabel" styleName="ButtonBackPanel" verticalGap="0" horizontalGap="0" width="100%" height="32" verticalAlign="middle" includeInLayout="false" visible="false">
              <mx:Image id="outBalConfImg" source="@Embed('../../assets/themes/default/skin/alert_info.png')" width="28" height="28" verticalAlign="middle"/>
              <mx:Label id="outBalCnfMessage" textAlign="left" fontWeight="bold" text="" width="100%" selectable="true" color="red"/>            
          </mx:HBox>
          <mx:HBox id="sConfLabel" styleName="ButtonBackPanel" verticalGap="0" horizontalGap="0" width="100%" height="32" verticalAlign="middle" includeInLayout="false" visible="false">
              <mx:Image source="@Embed('../../assets/themes/default/skin/alert_info.png')" width="28" height="28" verticalAlign="middle"/>            
              <mx:Label id="txnMessage" textAlign="left" fontWeight="bold" text="{this.parentApplication.xResourceManager.getKeyValue('inf.label.confirm.txn')}" selectable="true"/>    
          </mx:HBox>    
             <mx:Grid verticalGap="0" horizontalGap="0" width="100%">
                     <mx:GridRow id="sRefNoRow" width="100%">
                        <mx:GridItem width="20%" styleName="LabelBgColor">
                            <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('cam.securityinentry.label.referenceno')}" styleName="FormLabelHeading"/>
                        </mx:GridItem>
                        <mx:GridItem width="30%" colSpan="3">
                           <mx:Label id="uConfRefNo" text=""/> 
                        </mx:GridItem>  
                        
                    </mx:GridRow>
                    <mx:GridRow width="100%">
                        <mx:GridItem width="20%" styleName="LabelBgColor">
                            <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('cam.securityinentry.label.fundaccountno')}" styleName="FormLabelHeading"/>
                        </mx:GridItem>
                        <mx:GridItem width="30%">
                            <mx:Label id="uConfFundAccount"  text=""/>
                        </mx:GridItem> 
                        <mx:GridItem width="20%" styleName="LabelBgColor">
                            <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('cam.securityinentry.label.fundaccountname')}" styleName="FormLabelHeading"/>
                        </mx:GridItem>
                        <mx:GridItem width="30%">
                            <cntrls:XenosLabel id="uConfFundAccountName"  text="" isWrapReq="true" width="280"/>
                        </mx:GridItem>                        
                    </mx:GridRow>
                    <mx:GridRow width="100%">
                       <mx:GridItem width="20%" styleName="LabelBgColor">
                            <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('cam.securityinentry.label.custodianbank')}" styleName="FormLabelHeading"/>
                        </mx:GridItem>
                        <mx:GridItem width="30%" >
                            <mx:Label id="uConfCustBank"  text=""/> 
                        </mx:GridItem>
                       <mx:GridItem width="20%" styleName="LabelBgColor">
                            <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('cam.securityinentry.label.custodianbankname')}" styleName="FormLabelHeading"/>
                        </mx:GridItem>
                        <mx:GridItem width="30%" >
                            <cntrls:XenosLabel id="uConfCustBankName"  text="" isWrapReq="true" width="280"/> 
                        </mx:GridItem>                    
                    </mx:GridRow>
                    <mx:GridRow width="100%">   
                         <mx:GridItem width="20%" styleName="LabelBgColor">
                            <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('cam.securityinentry.label.oursettleac')}" styleName="FormLabelHeading"/>
                        </mx:GridItem>
                        <mx:GridItem width="30%" >
                            <mx:Label id="uConfOurSettleAc"  text=""/>                          
                        </mx:GridItem>   
                         <mx:GridItem width="20%" styleName="LabelBgColor">
                            <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('cam.securityinentry.label.oursettleacname')}" styleName="FormLabelHeading"/>
                        </mx:GridItem>
                        <mx:GridItem width="30%" >
                            <cntrls:XenosLabel id="uConfOurSettleAcName"  text="" isWrapReq="true" width="280"/>                          
                        </mx:GridItem> 
                    </mx:GridRow>    
                    <mx:GridRow width="100%">
                            <mx:GridItem width="20%" styleName="LabelBgColor">
                                <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('cam.securityinentry.label.securitycode')}" styleName="FormLabelHeading"/>
                            </mx:GridItem>
                            <mx:GridItem width="30%">                                
                                <mx:Label id="uConfSecurity"  text=""/>                        
                            </mx:GridItem>
                            <mx:GridItem width="20%" styleName="LabelBgColor">
                                <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('cam.securityinentry.label.securityname')}" styleName="FormLabelHeading"/>
                            </mx:GridItem>
                            <mx:GridItem width="30%">                                
                                <cntrls:XenosLabel id="uConfSecurityName"  text="" isWrapReq="true" width="280"/>                        
                            </mx:GridItem>
                    </mx:GridRow>   
                        <mx:GridRow width="100%"> 
	                        <mx:GridItem width="20%" styleName="LabelBgColor">
	                            <mx:Label id="lbluConfSecInDate" text="" styleName="FormLabelHeading"/>
	                        </mx:GridItem>
	                        <mx:GridItem width="30%">
	                            <mx:Label id="uConfSecInDate"  text=""/>
	                        </mx:GridItem> 
                            <mx:GridItem width="20%" styleName="LabelBgColor">
                                <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('cam.securityinentry.label.quantity')}" styleName="FormLabelHeading"/>
                            </mx:GridItem>
                            <mx:GridItem width="30%">
                               <mx:Label id="uConfQuantity" text=""/>
                            </mx:GridItem>  
                    </mx:GridRow>
                   <mx:GridRow width="100%">
                        
                        <mx:GridItem width="20%" styleName="LabelBgColor">
                            <mx:Label id="lbluConfSecInReason" text="" styleName="FormLabelHeading"/>
                        </mx:GridItem>
                        <mx:GridItem width="30%" colSpan="3">
                            <mx:Label id="uConfSecInReason"  text=""/>                             
                        </mx:GridItem>
                    </mx:GridRow>    
                       
                    <mx:GridRow width="100%">
                    
                    
                    </mx:GridRow>
                        <mx:GridRow width="100%">
                            <mx:GridItem width="20%" styleName="LabelBgColor">
                                <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('cam.cashsecurity.label.issueccy')}" styleName="FormLabelHeading"/>
                            </mx:GridItem>
                            <mx:GridItem width="30%">
                               <mx:Label id="uConfIssueCcy" text=""/>
                            </mx:GridItem>  
                            <mx:GridItem width="20%" styleName="LabelBgColor">
                            <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('cam.cashsecurity.label.baseccy')}" styleName="FormLabelHeading"/>
                            </mx:GridItem>
                            <mx:GridItem width="30%" >
                            <mx:Label id="uConBaseCcy" text=""/>
                            </mx:GridItem>
                    </mx:GridRow>
                    
                    <mx:GridRow width="100%">
                     <mx:GridItem width="20%" styleName="LabelBgColor">
                            <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('cam.security.label.bookvaluelc')}" styleName="FormLabelHeading"/>
                        </mx:GridItem>
                        <mx:GridItem width="30%">
                            <mx:Label id="uConfBookValue"  text=""/>                            
                        </mx:GridItem>
                        
                      <mx:GridItem width="20%" styleName="LabelBgColor">
                            <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('cam.security.label.bookvaluebc')}" styleName="FormLabelHeading"/>
                        </mx:GridItem>
                        <mx:GridItem width="30%" >
                            <mx:Label id="uConfBookValueBC"  text=""/> 
                        </mx:GridItem> 
                    </mx:GridRow>  
                    
                      
                    
                    <mx:GridRow width="100%">
                    
                        <mx:GridItem width="20%" styleName="LabelBgColor">
	                        <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('cam.securityinentry.label.acruedintpaidlc')}" styleName="FormLabelHeading" />
	                        </mx:GridItem>
	                        <mx:GridItem width="30%" >
	                        <mx:Label id="uConfAcruedIntPaidLc" text=""/>
                        </mx:GridItem>
                        
                    	 <mx:GridItem width="20%" styleName="LabelBgColor">
	                            <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('cam.security.label.accruedinterestpaidbc')}" styleName="FormLabelHeading"/>
	                        </mx:GridItem>
	                        <mx:GridItem width="30%" >
	                            <mx:Label id="uConfAcruedIntPaidBC"  text=""  width="280"/>  
                        </mx:GridItem>
                        </mx:GridRow>
                        
                         <mx:GridRow width="100%">
                            <mx:GridItem width="20%" styleName="LabelBgColor">
                                <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('cam.securityinentry.label.debitledger')}" styleName="FormLabelHeading"/>
                            </mx:GridItem>
                            <mx:GridItem width="30%">
                               <mx:Label id="uConfDebitLedger" text=""/>
                            </mx:GridItem>   
                           <mx:GridItem width="20%" styleName="LabelBgColor">
                                <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('cam.securityinentry.label.creditledger')}" styleName="FormLabelHeading"/>
                            </mx:GridItem>
                            <mx:GridItem width="30%">
                               <mx:Label id="uConfCreditLedger" text=""/>
                            </mx:GridItem>
                    </mx:GridRow>
                    
	                    <mx:GridRow width="100%">
	                            <mx:GridItem width="20%" styleName="LabelBgColor">
	                                <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('cam.securityinentry.label.remarks')}" styleName="FormLabelHeading"/>
	                            </mx:GridItem>
	                            <mx:GridItem width="30%">
	                               <cntrls:XenosLabel id="uConfRemarks" toolTip="{remarkStr}"  isWrapReq="true" width="600"/>
	                            </mx:GridItem>    
	                            <mx:GridItem width="20%" styleName="LabelBgColor">
	                            	<mx:Label  text="{this.parentApplication.xResourceManager.getKeyValue('cam.security.label.sptcalculationdate')}" styleName="FormLabelHeading"/>	                            	
	                            </mx:GridItem>
	                            <mx:GridItem width="30%" styleName="LabelBgColor">
	                            	<cntrls:XenosLabel  id="uConfSpotCalcDate"   isWrapReq="true" width="600"/>                            	
	                            </mx:GridItem>
	                                   
	                    </mx:GridRow>
	                    <mx:GridRow width="100%">
	                            <mx:GridItem width="20%" styleName="LabelBgColor">
	                                <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('cam.securityinentry.label.statement')}" styleName="FormLabelHeading"/>
	                            </mx:GridItem>
	                            <mx:GridItem width="80%">
	                               <cntrls:XenosLabel id="uConfStmtDesc" text="" isWrapReq="true" width="600"/>
	                            </mx:GridItem>
	                            <mx:GridItem width="20%" styleName="LabelBgColor">
	                                <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('cam.security.label.calculatedspotrate')}" styleName="FormLabelHeading"/>
	                            </mx:GridItem>
	                            <mx:GridItem width="80%">
	                               <cntrls:XenosLabel id="uConfSpotRate" text="" isWrapReq="true" width="600"/>
	                            </mx:GridItem>
	                            
	                    </mx:GridRow>
	                 </mx:Grid>
            <mx:HBox width="100%" styleName="ButtonBackPanel">
               <cntrls:XenosButton label="{this.parentApplication.xResourceManager.getKeyValue('inf.form.button.label.back')}" id="back" styleName="BtnStyle" click="doBack()"/>
                  <cntrls:XenosButton label="{this.parentApplication.xResourceManager.getKeyValue('ref.form.button.label.confirm')}" id="uConfSubmit" styleName="BtnStyle" click="submitUConf(this.mode)" /> 
                  <cntrls:XenosButton label="{this.parentApplication.xResourceManager.getKeyValue('inf.form.button.label.submit')}" id="cancelSubmit" styleName="BtnStyle" click=" {this.dispatchEvent(new Event('cancelEntrySave'))}" includeInLayout="false" visible="false"/> 
                  <cntrls:XenosButton label="{this.parentApplication.xResourceManager.getKeyValue('ref.form.button.label.confirm')}" id="uCancelConfSubmit" styleName="BtnStyle" click="{this.dispatchEvent(new Event('cancelEntryConf'))}" includeInLayout="false" visible="false"/>  
                  <cntrls:XenosButton label="{this.parentApplication.xResourceManager.getKeyValue('ref.form.button.label.sysconfirm')}" id="sConfSubmit" styleName="BtnStyle" click="{this.mode == 'entry' ?  this.dispatchEvent(new Event('entrySysConf')) : ( mode == 'amend' ? this.dispatchEvent(new Event('amendEntrySysConf')): this.dispatchEvent(new Event('cancelEntrySysConf')))}" includeInLayout="false" visible="false"/>               
            </mx:HBox>
        </mx:VBox>
    </mx:ViewStack>
    </mx:VBox>
    
    </mx:Canvas>
</containers:XenosEntryModule>

