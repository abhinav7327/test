<?xml version="1.0" encoding="utf-8"?>
<containers:XenosQueryModule xmlns:mx="http://www.adobe.com/2006/mxml" 
	                         xmlns:containers="com.nri.rui.core.containers.*" 
	                         xmlns:flexlib="http://code.google.com/p/flexlib/" 
	                         xmlns:cntrls="com.nri.rui.core.controls.*" 
	                         xmlns:xenospopup="com.nri.rui.ref.popupImpl.*"
	                         xmlns:frmtrs="com.nri.rui.core.formatters.*"
	                         xmlns:valdtrs="com.nri.rui.core.validators.*" 	                         
	                         layout="vertical" 
	                         percentWidth="100" 
	                         percentHeight="100" 
	                         horizontalScrollPolicy="off" 
	                         verticalScrollPolicy="off" 
	                         creationComplete="loadResourceBundle()">
	
	<mx:Metadata>
     	[ResourceBundle("stlResources")]
     	[ResourceBundle("coreResources")]
    </mx:Metadata>    
	
	<mx:Script>
		<![CDATA[
			import com.nri.rui.core.renderers.StatusRenderer;
			import com.nri.rui.core.RendererFectory;
			import com.nri.rui.core.renderers.ImgSummaryRenderer;
			import com.nri.rui.stl.renderers.SettlementAuthorizationDetailRenderer;
			
			    
    /**
	 * This method should be called on creationComplete of the datagrid 
	 */ 
	 private function bindDataGrid():void {
		qh.dgrid = resultSummary;
	}
	
	 private function getFundAccountNo(item:Object,column : DataGridColumn):String {
	 	return item.fundAccountNo;
	 }
	 /**
	 * Method to go '' state
	 */
	 private function queryState():void{
	 	currentState='';
	 	app.submitButtonInstance = submit;
	 }
	 
	 private function resultState():void{
	 	currentState='result';
	 	app.submitButtonInstance = authorization;
	 }
	 
	 private function queryResultState():void{
	 	currentState='qryres';
	 	app.submitButtonInstance = submit;
	 }
	
		]]>
	</mx:Script>
	
	<mx:Script source="actionscripts/SettlementAuthorizationQueryModule.as"/>	
    
     <containers:states>
    	<mx:State name="result">
            <mx:SetProperty target="{qry}" name="width" value="0%"/>
            <mx:SetProperty target="{rslt}" name="width" value="100%"/>            
        </mx:State>
        <mx:State name="qryres">
            <mx:SetProperty target="{qry}" name="width" value="50%"/>
            <mx:SetProperty target="{rslt}" name="width" value="50%"/>            
        </mx:State>
    </containers:states>
    <!-- Define Transition array with one Transition object.-->
    <containers:transitions>
        <!-- A transition for changing from any state to any state. -->
        <mx:Transition id="qryTransition" fromState="*" toState="*">
            <!-- Define a Parallel effect as the top-level effect.-->
            <mx:Parallel id="t1" targets="{[qry,rslt]}">
                <!-- Define a Move and Resize effect.-->
                <mx:Move  duration="400"/>
                <!--<mx:Resize duration="400"/>-->
            </mx:Parallel>
        </mx:Transition>
    </containers:transitions>
    
    <frmtrs:XenosNumberFormatter id="numberFormatter" useThousandsSeparator="true" />
    <valdtrs:XenosNumberValidator id="numVal1" 
                                  source="{quantityFrom}" 
                                  property="text" 
                                  allowNegative="false" 
                                  domain="real" 
                                  negativeError= "{this.parentApplication.xResourceManager.getKeyValue('stl.message.error.nonegativequantity')}"
                                  requiredFieldError=""
                                  invalidCharError="{this.parentApplication.xResourceManager.getKeyValue('stl.message.error.invalidquantity')}" 
                                  exceedsMaxError="{this.parentApplication.xResourceManager.getKeyValue('stl.message.error.15digitsallowedbeforedecimalpoint')}"                                     
                                  separationError=""
                                  lowerThanMinError="" 
                                  maxValue="999999999999999.999" 
                                  minValue="" 
                                  invalidFormatCharsError="{this.parentApplication.xResourceManager.getKeyValue('stl.message.error.invalidquantity')}" 
                                  decimalPointCountError="{this.parentApplication.xResourceManager.getKeyValue('stl.message.error.invalidquantity')}" 
                                  precision="3" 
                                  precisionError="{this.parentApplication.xResourceManager.getKeyValue('stl.message.error.3digitsallowedafterdecimalpoint')}" />	
    <valdtrs:XenosNumberValidator id="numVal2" 
                                  source="{quantityTo}" 
                                  property="text" 
                                  allowNegative="false" 
                                  domain="real" 
                                  negativeError="{this.parentApplication.xResourceManager.getKeyValue('stl.message.error.nonegativequantity')}"
                                  requiredFieldError=""
                                  invalidCharError="{this.parentApplication.xResourceManager.getKeyValue('stl.message.error.invalidquantity')}" 
                                  exceedsMaxError="{this.parentApplication.xResourceManager.getKeyValue('stl.message.error.15digitsallowedbeforedecimalpoint')}"                                     
                                  separationError=""
                                  lowerThanMinError="" 
                                  maxValue="999999999999999.999" 
                                  minValue="" 
                                  invalidFormatCharsError="{this.parentApplication.xResourceManager.getKeyValue('stl.message.error.invalidquantity')}" 
                                  decimalPointCountError="{this.parentApplication.xResourceManager.getKeyValue('stl.message.error.invalidquantity')}" 
                                  precision="3" 
                                  precisionError="{this.parentApplication.xResourceManager.getKeyValue('stl.message.error.3digitsallowedafterdecimalpoint')}" /> 	
    <valdtrs:XenosNumberValidator id="numVal3" 
                                  source="{amountFrom}" 
                                  property="text" 
                                  allowNegative="false" 
                                  domain="real" 
                                  negativeError="{this.parentApplication.xResourceManager.getKeyValue('stl.message.error.nonegativeamount')}"
                                  requiredFieldError=""
                                  invalidCharError="{this.parentApplication.xResourceManager.getKeyValue('stl.message.error.invalidamount')}" 
                                  exceedsMaxError="{this.parentApplication.xResourceManager.getKeyValue('stl.message.error.15digitsallowedbeforedecimalpoint')}"                                     
                                  separationError=""
                                  lowerThanMinError="" 
                                  maxValue="999999999999999.999" 
                                  minValue="" 
                                  invalidFormatCharsError="{this.parentApplication.xResourceManager.getKeyValue('stl.message.error.invalidamount')}" 
                                  decimalPointCountError="{this.parentApplication.xResourceManager.getKeyValue('stl.message.error.invalidamount')}" 
                                  precision="3" 
                                  precisionError="{this.parentApplication.xResourceManager.getKeyValue('stl.message.error.3digitsallowedafterdecimalpoint')}" />    
    <valdtrs:XenosNumberValidator id="numVal4" 
                                  source="{amountTo}" 
                                  property="text" 
                                  allowNegative="false" 
                                  domain="real" 
                                  negativeError="{this.parentApplication.xResourceManager.getKeyValue('stl.message.error.nonegativeamount')}"
                                  requiredFieldError=""
                                  invalidCharError="{this.parentApplication.xResourceManager.getKeyValue('stl.message.error.invalidamount')}" 
                                  exceedsMaxError="{this.parentApplication.xResourceManager.getKeyValue('stl.message.error.15digitsallowedbeforedecimalpoint')}"                                     
                                  separationError=""
                                  lowerThanMinError="" 
                                  maxValue="999999999999999.999" 
                                  minValue="" 
                                  invalidFormatCharsError="{this.parentApplication.xResourceManager.getKeyValue('stl.message.error.invalidamount')}" 
                                  decimalPointCountError="{this.parentApplication.xResourceManager.getKeyValue('stl.message.error.invalidamount')}" 
                                  precision="3" 
                                  precisionError="{this.parentApplication.xResourceManager.getKeyValue('stl.message.error.3digitsallowedafterdecimalpoint')}" />
    
    <mx:VBox width="100%" verticalGap="0" horizontalGap="0" id="screenNavigater">    
    <mx:HBox width="100%" styleName="ExCoBgPanel">
    	<mx:Image source="@Embed('../../assets/img/show_query.png')" toolTip="Query" buttonMode="true" click="queryState()"  />    	
    	<mx:Image source="@Embed('../../assets/img/show_result.png')" toolTip="Result" buttonMode="true" click="resultState()" />
    	<mx:Image source="@Embed('../../assets/img/show_query_result.png')" toolTip="QueryResult" buttonMode="true" click="queryResultState()"/>    	
    </mx:HBox>
    <mx:HRule strokeColor="#d2d9dc" strokeWidth="1" width="100%" />
    </mx:VBox>
	
    <mx:Canvas width="100%" height="100%" horizontalScrollPolicy="auto"  verticalScrollPolicy="auto">
	<mx:VBox width="100%" height="100%">
	<mx:HDividedBox id="hdbox1" width="100%" height="100%" styleName="Padding4" liveDragging="true" creationComplete="{this.loadAll()}"  >
	<!--<containers:CollapsibleHDividedBox id="hdbox1" width="100%" height="100%" x="0" y="0" liveDragging="true" creationComplete="{}" paddingBottom="6" paddingLeft="6" paddingRight="6" paddingTop="6" >-->
		
		<mx:Canvas id="qry" width="100%" height="100%" horizontalScrollPolicy="auto" verticalScrollPolicy="auto">
		<mx:VBox label="Query Criteria" width="100%" height="100%" styleName="HDivideStyle" >
			<mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('inf.title.search.criteria')}" fontWeight="bold"/>
			<mx:HRule id="ruleBar" strokeColor="#94acb7" strokeWidth="2" width="100%" />
			<cntrls:XenosErrors id="errPage" width="100%" color="#FF0000" backgroundAlpha="0" borderStyle="none"/>
		
			<!--<flexlib:WindowShade id="ws1" tabChildren="{ws1.opened=false}" styleName="linkButtonWindowShade" label="Optional Fields - Group 1" width="100%">-->
			<mx:Grid width="100%" borderThickness="0">
                    <mx:GridRow width="100%">
                        <mx:GridItem width="20%" borderThickness="0">
                            <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('stl.label.fundcode')}" />
                        </mx:GridItem>
                        <mx:GridItem width="30%" borderThickness="0">
                           <xenospopup:FundPopUpHbox id="fundPopUp"/>
                        </mx:GridItem>
                        <mx:GridItem width="20%" borderThickness="0">
                            <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('stl.label.fundaccountno')}" />
                        </mx:GridItem>
                        <mx:GridItem width="30%" borderThickness="0">
                            <xenospopup:AccountPopUpHbox id="fundAccountNo" retContextItem="{returnContextItem}" recContextItem="{populateInvActContext()}"/>
                        </mx:GridItem>
                    </mx:GridRow>
                    
                    <mx:GridRow width="100%">
                        <mx:GridItem width="20%" borderThickness="0">
                            <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('stl.label.settlementreferenceno')}" />
                        </mx:GridItem>
                        <mx:GridItem width="30%" borderThickness="0">
                            <mx:TextInput id="stlRefNo" restrict="{Globals.INPUT_PATTERN}"/>
                        </mx:GridItem>                         
                        <mx:GridItem width="20%" borderThickness="0">
                            <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('stl.label.swiftreferenceno')}" />
                        </mx:GridItem>
                        <mx:GridItem width="30%" borderThickness="0">
                            <mx:TextInput id="swiftRefNo" restrict="{Globals.INPUT_PATTERN}"/>
                        </mx:GridItem> 
                    </mx:GridRow>
                    
                    <mx:GridRow width="100%">
                        <mx:GridItem width="20%" borderThickness="0">
                            <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('stl.label.imoffice')}" />
                        </mx:GridItem>
                        <mx:GridItem width="30%" borderThickness="0">
                            <mx:ComboBox id="imOffice" labelField="label" prompt="Select"/>                           
                        </mx:GridItem>
                        <mx:GridItem width="20%" borderThickness="0">
                            <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('stl.label.eventtype')}" />
                        </mx:GridItem>
                        <mx:GridItem width="30%" borderThickness="0">
                            <mx:ComboBox id="subEventType" labelField="label" prompt="Select"/>                           
                        </mx:GridItem>
                    </mx:GridRow>
                    
                    <mx:GridRow width="100%">
                		<mx:GridItem width="20%" borderThickness="0">
                            <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('stl.label.tradedatefromto')}" />
                        </mx:GridItem>
                		<mx:GridItem width="30%" borderThickness="0">
                            <mx:HBox>
                       			<mx:DateField id="trddateFrom"  formatString="YYYYMMDD" editable="true" width="90"/>
                       			<mx:DateField id="trddateTo" formatString="YYYYMMDD" editable="true" width="90"/>
            				</mx:HBox>                         
                        </mx:GridItem>
                		<mx:GridItem width="20%" borderThickness="0">
                            <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('stl.label.valuedatefromto')}" />
                        </mx:GridItem>
                        <mx:GridItem width="30%" borderThickness="0">
                            <mx:HBox>
                       			<mx:DateField id="valueDateFrom"  formatString="YYYYMMDD" editable="true" width="90"/>
                       			<mx:DateField id="valueDateTo" formatString="YYYYMMDD" editable="true" width="90"/>
            				</mx:HBox>                         
                        </mx:GridItem>
                    </mx:GridRow>
                    
                    <mx:GridRow width="100%">
	                		<mx:GridItem width="20%" borderThickness="0">
	                            <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('stl.label.settlementccy')}" />
	                        </mx:GridItem>
	                        <mx:GridItem width="30%" borderThickness="0">
	                            <cntrls:CurrencyHBox id="stlcurrency"/>
	                        </mx:GridItem>
	                        <mx:GridItem width="20%" borderThickness="0">
	                            <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('stl.label.securitycode')}" />
	                        </mx:GridItem>
	                        <mx:GridItem width="30%" borderThickness="0">
	                            <xenospopup:InstrumentPopUpHbox id="security"/>                          
	                        </mx:GridItem>
	              </mx:GridRow>
	              
	              <mx:GridRow width="100%">
	                		<mx:GridItem width="20%" borderThickness="0">
	                            <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('stl.label.firmsettlementbank')}" />
	                        </mx:GridItem>                        
	                        <mx:GridItem width="30%" borderThickness="0">
	                            <xenospopup:FinInstitutePopUpHbox id="bankPopUp" recContextItem="{populateFinInstRole()}"/>
	                        </mx:GridItem>
	                        <mx:GridItem width="20%" borderThickness="0">
	                            <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('stl.label.inx.firmsettlementaccount')}" />
	                        </mx:GridItem>
	                        <mx:GridItem width="30%" borderThickness="0">
	                            <xenospopup:AccountPopUpHbox id="fundSettlementAccount" retContextItem="{returnContextItem}" recContextItem="{populateFirmSettlementAccountContext()}"/>                           
	                        </mx:GridItem>
	             </mx:GridRow>	                                       
            </mx:Grid> 
            
            <flexlib:WindowShade id="ws2" tabChildren="{ws2.opened}" styleName="linkButtonWindowShade" label="{this.parentApplication.xResourceManager.getKeyValue('inf.form.label.lessimportant.fields')}" width="100%" opened="false">			
	                <mx:Grid width="100%" borderThickness="0">
	                	<mx:GridRow width="100%">
	                        <mx:GridItem width="100%" borderThickness="0" colSpan="4">
	                        	<mx:HBox width="100%">
	                        		<mx:Grid width="100%" borderThickness="0">
	                        			<mx:GridRow width="100%">
				                        	<mx:GridItem width="16%" borderThickness="0">
				                            	<mx:CheckBox label="{this.parentApplication.xResourceManager.getKeyValue('stl.label.cashfreepayment')}" name="CASH_FREE_DELIVER" id="chkbox1"/>
				                        	</mx:GridItem>
				                        	<mx:GridItem width="16%" borderThickness="0">
				                            	<mx:CheckBox label="{this.parentApplication.xResourceManager.getKeyValue('stl.label.cashfreereceipt')}" name="CASH_FREE_RECEIVE" id="chkbox2"/>
				                        	</mx:GridItem>
				                        	<mx:GridItem width="16%" borderThickness="0">
				                            	<mx:CheckBox label="{this.parentApplication.xResourceManager.getKeyValue('stl.label.dvp')}" name="DELIVER_AGAINST_PAYMENT" id="chkbox3"/>
				                        	</mx:GridItem>
				                        	<mx:GridItem width="16%" borderThickness="0">
				                            	<mx:CheckBox label="{this.parentApplication.xResourceManager.getKeyValue('stl.label.rvp')}" name="RECEIVE_AGAINST_PAYMENT" id="chkbox4"/>
				                        	</mx:GridItem>
				                        	<mx:GridItem width="16%" borderThickness="0">
				                            	<mx:CheckBox label="{this.parentApplication.xResourceManager.getKeyValue('stl.label.freedeliver')}" name="SECURITY_FREE_DELIVER" id="chkbox5"/>
				                        	</mx:GridItem>
				                        	<mx:GridItem width="16%" borderThickness="0">
				                            	<mx:CheckBox label="{this.parentApplication.xResourceManager.getKeyValue('stl.label.freereceipt')}" name="SECURITY_FREE_RECEIVE" id="chkbox6"/>
				                        	</mx:GridItem>
				                    	</mx:GridRow>
				                 	</mx:Grid>                     		
	                        	</mx:HBox>                            
	                     	</mx:GridItem>	                         
	                    </mx:GridRow>
	                    	                	
	                	<mx:GridRow width="100%">
	                        <mx:GridItem width="20%" borderThickness="0">
	                            <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('stl.label.tradereferenceno')}" />
	                        </mx:GridItem>
	                        <mx:GridItem width="30%" borderThickness="0">
	                        	<mx:HBox width="100%" horizontalGap="0">
	                        		<mx:TextInput id="trdRefNo" width="130" restrict="{Globals.INPUT_PATTERN}"/> 
	                        		<mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('stl.label.for')}"/>
	                        		<mx:ComboBox id="settleFor" labelField="label" prompt="Select"/>
	                        	</mx:HBox>                              
	                        </mx:GridItem>
	                        <mx:GridItem width="20%" borderThickness="0">
	                            <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('stl.stlqry.label.cpcode')}" />
	                        </mx:GridItem>
	                        <mx:GridItem width="30%" borderThickness="0">
	                            <mx:HBox id="counterpartyCodeBox" width="100%">
								<mx:ComboBox id="counterpartyCode" width="30%" labelField="label" prompt="Select" change="onChangeCounterpartyCode()"/>
								<!--<mx:TextInput id="txt1" text="Broker"/>-->
								</mx:HBox>
	                        </mx:GridItem> 
	                    </mx:GridRow>	                	
	                	
	                    <mx:GridRow width="100%">	                    
	                    	<mx:GridItem width="20%" borderThickness="0">
	                            <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('stl.label.counterpartyac')}" />
	                        </mx:GridItem>
	                        <mx:GridItem width="30%" borderThickness="0">
	                            <xenospopup:AccountPopUpHbox id="counterPartyAccount" retContextItem="{returnContextItem}" recContextItem="{populateCounterPartyActContext()}"/>                           
	                        </mx:GridItem>
	                        
	                        <mx:GridItem width="20%" borderThickness="0">
	                            <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('stl.label.transactiontype')}" />
	                        </mx:GridItem>
	                        <mx:GridItem width="30%" borderThickness="0">
	                            <mx:ComboBox id="transactionType" labelField="label" prompt="Select"/>
	                        </mx:GridItem> 
	                    </mx:GridRow>
		            	
		            	<mx:GridRow width="100%">
	                        <mx:GridItem width="20%" borderThickness="0">
	                            <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('stl.label.settlementstatus')}" />
	                        </mx:GridItem>
	                        <mx:GridItem width="30%" borderThickness="0">
	                            <mx:ComboBox id="settlementStatus" labelField="label" prompt="Select"/>                           
	                        </mx:GridItem>
	                        <mx:GridItem width="20%" borderThickness="0">
	                            <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('stl.stlqry.label.settlestandingstatus')}" />
	                        </mx:GridItem>
	                        <mx:GridItem width="30%" borderThickness="0">
	                            <mx:ComboBox id="settleStandingStatus" labelField="label" prompt="Select"/>                           
	                        </mx:GridItem> 
	                    </mx:GridRow>
		            	
		            	<mx:GridRow width="100%">
	                        <mx:GridItem width="20%" borderThickness="0">
	                            <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('stl.stlqry.label.contractualstatus')}" />
	                        </mx:GridItem>
	                        <mx:GridItem width="30%" borderThickness="0">
	                            <mx:ComboBox id="contractualSettlementStatus" labelField="label" prompt="Select"/>                           
	                        </mx:GridItem>
	                        <mx:GridItem width="20%" borderThickness="0">
	                            <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('stl.stlqry.label.settledatefromto')}"/>
	                        </mx:GridItem>
	                        <mx:GridItem width="30%" borderThickness="0">
	                            <mx:HBox>
	                       			<mx:DateField id="SettlementdateFrom"  formatString="YYYYMMDD" editable="true" width="90"/>
	                       			<mx:DateField id="SettlementdateTo" formatString="YYYYMMDD" editable="true" width="90"/>
	            				</mx:HBox>
	                        </mx:GridItem> 
	                    </mx:GridRow>
		            	
		            	<mx:GridRow width="100%">
	                        <mx:GridItem width="20%" borderThickness="0">
	                            <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('stl.label.inxtransmission')}" />
	                        </mx:GridItem>
	                        <mx:GridItem width="30%" borderThickness="0">
	                            <mx:ComboBox id="inxTransmossion" labelField="label" prompt="Select"/>                           
	                        </mx:GridItem>
	                        <mx:GridItem width="20%" borderThickness="0">
	                            <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('stl.label.securitytype')}" />
	                        </mx:GridItem>
	                        <mx:GridItem width="30%" borderThickness="0">
	                            <cntrls:TreeCombo id="instrumentType" dataSource="{new XML((app.cachedItems.instrumentTree).toString())}" editMode="true" width="153"  displayClearIcon="true"  labelField="label" treeHeight="200"  x="10" y="10"/>                            
	                        </mx:GridItem>
	                    </mx:GridRow>
		            	
		            	<mx:GridRow width="100%">
	                        <mx:GridItem width="20%" borderThickness="0">
	                            <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('stl.label.correspondingsecuritycode')}" />
	                        </mx:GridItem>
	                        <mx:GridItem width="30%" borderThickness="0">
	                            <xenospopup:InstrumentPopUpHbox id="correspondingSecurityId"/>                          
	                        </mx:GridItem>
	                        <mx:GridItem width="20%" borderThickness="0">
	                            <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('stl.label.quantityfromto')}"/>
	                        </mx:GridItem>
	                        <mx:GridItem width="30%" borderThickness="0">
	                            <mx:HBox>
	                       			<mx:TextInput id="quantityFrom" width="100" focusOut="{numVal1.handleNumericField(numberFormatter)}"/>
	                       			<mx:TextInput id="quantityTo" width="100" focusOut="{numVal2.handleNumericField(numberFormatter)}"/>
	            				</mx:HBox>                            
	                        </mx:GridItem>
	                    </mx:GridRow>
		            	
		            	<mx:GridRow width="100%">
	                        <mx:GridItem width="20%" borderThickness="0">
	                            <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('stl.stlqry.label.amountfromto')}"/>
	                        </mx:GridItem>
	                        <mx:GridItem width="30%" borderThickness="0">
	                            <mx:HBox>
	                       			<mx:TextInput id="amountFrom" width="100" focusOut="{numVal3.handleNumericField(numberFormatter)}"/>
	                       			<mx:TextInput id="amountTo" width="100" focusOut="{numVal4.handleNumericField(numberFormatter)}"/>
	            				</mx:HBox>                            
	                        </mx:GridItem>
	                        <mx:GridItem width="20%" borderThickness="0">
	                            <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('stl.stlqry.label.instructionrefno')}"/>
	                        </mx:GridItem>
	                        <mx:GridItem width="30%" borderThickness="0">
	                       		<mx:TextInput id="instructionRefNo" restrict="{Globals.INPUT_PATTERN}"/>                         
	                        </mx:GridItem>
	                    </mx:GridRow>
		            	
		            	<mx:GridRow width="100%">
	                        <mx:GridItem width="20%" borderThickness="0">
	                            <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('stl.label.inx.transmissiondate')}"/>
	                        </mx:GridItem>
	                        <mx:GridItem width="30%" borderThickness="0">
	                            <mx:HBox>
	                       			<mx:DateField id="transmissionDate"  formatString="YYYYMMDD" editable="true" width="90"/>
	            				</mx:HBox>
	                        </mx:GridItem> 
	                        <mx:GridItem width="20%" borderThickness="0">
	                            <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('stl.label.inx.transmissionstatus')}" />
	                        </mx:GridItem>
	                        <mx:GridItem width="30%" borderThickness="0">
	                            <mx:ComboBox id="transmissionStatus" labelField="label" prompt="Select"/>                           
	                        </mx:GridItem>
	                    </mx:GridRow>
		            	
		            	<mx:GridRow width="100%">
	                        <mx:GridItem width="20%" borderThickness="0">
	                            <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('stl.stlqry.label.cancelreferenceno')}"/>
	                        </mx:GridItem>
	                        <mx:GridItem width="30%" borderThickness="0">
	                       		<mx:TextInput id="cancelRefNo" restrict="{Globals.INPUT_PATTERN}"/>                         
	                        </mx:GridItem>
	                        <mx:GridItem width="20%" borderThickness="0">
	                            <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('stl.stlqry.label.settlequeryfor')}" />
	                        </mx:GridItem>
	                        <mx:GridItem width="30%" borderThickness="0">
	                            <mx:ComboBox id="settleQueryFor" labelField="label" prompt="Select"/>                           
	                        </mx:GridItem>
	                    </mx:GridRow>
	                    
	                    <mx:GridRow width="100%">
	                        <mx:GridItem width="20%" borderThickness="0">
	                            <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('stl.label.status')}" />
	                        </mx:GridItem>
	                        <mx:GridItem width="30%" borderThickness="0">
	                            <mx:ComboBox id="status" labelField="label" prompt="Select"/>                           
	                        </mx:GridItem>
	                        <mx:GridItem width="20%" borderThickness="0">
	                            <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('stl.stlqry.label.matchstatus')}" />
	                        </mx:GridItem>
	                        <mx:GridItem width="30%" borderThickness="0">
	                            <mx:ComboBox id="matchStatus" labelField="label" prompt="Select"/>                           
	                        </mx:GridItem>
	                    </mx:GridRow>
	                    
	                    <mx:GridRow width="100%">
	                		<mx:GridItem width="20%" borderThickness="0">
	                            <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('stl.label.entrydatefromto')}"/>
	                        </mx:GridItem>
	                        <mx:GridItem width="30%" borderThickness="0">
	                            <mx:HBox>
	                       			<mx:DateField id="entryDateFrom"  formatString="YYYYMMDD" editable="true" width="90"/>
	                       			<mx:DateField id="entryDateTo" formatString="YYYYMMDD" editable="true" width="90"/>
	            				</mx:HBox>
	                        </mx:GridItem> 
	                        <mx:GridItem width="20%" borderThickness="0">
	                            <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('stl.label.lastentrydatefromto')}"/>
	                        </mx:GridItem>
	                        <mx:GridItem width="30%" borderThickness="0">
	                            <mx:HBox>
	                       			<mx:DateField id="lastEntryDateFrom"  formatString="YYYYMMDD" editable="true" width="90"/>
	                       			<mx:DateField id="lastEntryDateTo" formatString="YYYYMMDD" editable="true" width="90"/>
	            				</mx:HBox>                            
	                        </mx:GridItem>	                        
	                    </mx:GridRow>
	                    
	                    <mx:GridRow width="100%">
	                        <mx:GridItem width="20%" borderThickness="0">
	                            <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('stl.stlqry.label.datasource')}" />
	                        </mx:GridItem>
	                        <mx:GridItem width="30%" borderThickness="0">
	                            <mx:ComboBox id="dataSource" labelField="label" prompt="Select"/>                           
	                        </mx:GridItem>
	                        <mx:GridItem width="20%" borderThickness="0">
	                            <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('stl.stlqry.label.tradetype')}" />
	                        </mx:GridItem>
	                        <mx:GridItem width="30%" borderThickness="0">
	                            <mx:ComboBox id="tradeType" labelField="label" prompt="Select"/>                           
	                        </mx:GridItem>
	                    </mx:GridRow>
		            	
	                	<mx:GridRow width="100%">
	                        <mx:GridItem width="20%" borderThickness="0">
	                            <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('stl.stlqry.label.subtradetype')}" />
	                        </mx:GridItem>
	                        <mx:GridItem width="30%" borderThickness="0">
	                            <mx:ComboBox id="subTradeType" labelField="label" prompt="Select"/>                           
	                        </mx:GridItem>
	                        <mx:GridItem width="20%" borderThickness="0">
	                            <mx:Label text="{this.parentApplication.xResourceManager.getKeyValue('stl.stlqry.label.fail')}" />
	                        </mx:GridItem>
	                        <mx:GridItem width="30%" borderThickness="0">
	                            <mx:CheckBox id="failSettlements" click="checkFailSettlements()" />                          
	                        </mx:GridItem>
	                    </mx:GridRow>  				 
				 		
	              </mx:Grid>			 
			</flexlib:WindowShade>
			                
            <flexlib:WindowShade id="ws3" tabChildren="{ws3.opened}" styleName="linkButtonWindowShade" label="Sort Order Fields" opened="true" width="100%">
				<mx:Grid width="100%" borderThickness="0">
					<mx:GridRow width="100%">
						<mx:GridItem width="100%" borderThickness="0">
							<mx:HBox width="100%">
								<mx:ComboBox id="sortField1" labelField="label" change="sortOrder1Update()"></mx:ComboBox>
								<mx:ComboBox id="sortField2" labelField="label" change="sortOrder2Update()"></mx:ComboBox>
								<mx:ComboBox id="sortField3" labelField="label"></mx:ComboBox>
							</mx:HBox>					
						</mx:GridItem>                         
                    </mx:GridRow>
                </mx:Grid>
			</flexlib:WindowShade>

			<mx:HBox width="100%" styleName="ButtonBackPanel">
   	           <cntrls:XenosButton label="{this.parentApplication.xResourceManager.getKeyValue('inf.form.button.label.submit')}" id="submit" styleName="BtnStyle" click="{this.mode == 'query' ?  this.dispatchEvent(new Event('querySubmit')) : (this.mode == 'amend' ? this.dispatchEvent(new Event('amendSubmit')) : this.dispatchEvent(new Event('cancelSubmit')))}" />
               <mx:Button label="{this.parentApplication.xResourceManager.getKeyValue('inf.form.button.label.reset')}" styleName="BtnStyle" click="{this.mode == 'query' ?  this.dispatchEvent(new Event('queryReset')) : (this.mode == 'amend' ? this.dispatchEvent(new Event('amendReset')) : this.dispatchEvent(new Event('cancelReset')))}" />
	        </mx:HBox>
	        
		</mx:VBox>
		</mx:Canvas>
				
		<mx:VBox width="0%" height="100%" id="rslt" horizontalScrollPolicy="off" verticalScrollPolicy="off" styleName="HDivideStyle" >			
	         <cntrls:QueryResultHeader id="qh" printFunction="dispatchPrintEvent" pdfFunction="dispatchPdfEvent" xlsFunction="dispatchXlsEvent" previousFunction="dispatchPrevEvent" nextFunction="dispatchNextEvent" startIndex="{this.mode == 'query' ? 1 : 2}"/>
			 <mx:Label textAlign="center" width="100%" fontWeight="bold" id="resultHead" text=""/>
	         <cntrls:XenosErrors id="errPageResultSum" width="100%" color="#FF0000" backgroundAlpha="0" borderStyle="none"/>
			 <mx:DataGrid id="resultSummary" width="100%" height="100%" dataProvider="{queryResult}" sortableColumns="true" variableRowHeight="true" horizontalScrollPolicy="auto" creationComplete="bindDataGrid()" headerRelease="dataGrid_headerRelease(event)"> 
			    <mx:columns>
			    	<mx:DataGridColumn textAlign="center" width="40" headerText="" id="dgCollumnChkBox" dataField="selected" draggable="false" resizable="false" sortable="false" itemRenderer="com.nri.rui.core.renderers.SelectItem" headerRenderer="com.nri.rui.core.renderers.SelectAllItem" />
		            <mx:DataGridColumn headerText="" width="40" draggable="false" resizable="false" itemRenderer="com.nri.rui.core.renderers.ImgSummaryRenderer" sortable="false"/>
	               	<mx:DataGridColumn textAlign="center" headerText="{this.parentApplication.xResourceManager.getKeyValue('stl.label.settlementreferenceno')}" dataField="settlementReferenceNo" itemRenderer="com.nri.rui.stl.renderers.SettlementAuthorizationDetailRenderer" sortCompareFunction="sortUtil.sortString"/>           
	               	<mx:DataGridColumn textAlign="center" headerText="{this.parentApplication.xResourceManager.getKeyValue('stl.label.fundcode')}" dataField="fundCode" visible="true" sortCompareFunction="sortUtil.sortString"/>
	              	<mx:DataGridColumn textAlign="center" headerText="{this.parentApplication.xResourceManager.getKeyValue('stl.label.fundaccountno')}" dataField="fundAccountPk" labelFunction="getFundAccountNo" visible="true" sortCompareFunction="sortUtil.sortString"/>	              	
	               	<mx:DataGridColumn textAlign="center" headerText="{this.parentApplication.xResourceManager.getKeyValue('stl.label.inx.fundbank')}" dataField="ourBankId"  visible="true" sortCompareFunction="sortUtil.sortString"/>
	               	<mx:DataGridColumn textAlign="center" headerText="{this.parentApplication.xResourceManager.getKeyValue('stl.stlqry.label.oursettlementaccount')}" dataField="ourDisplayAccountNo"  visible="true" sortCompareFunction="sortUtil.sortString"/>
	               	<mx:DataGridColumn textAlign="center" headerText="{this.parentApplication.xResourceManager.getKeyValue('stl.label.counterpartyname')}" dataField="cpName"  visible="true" sortCompareFunction="sortUtil.sortString"/>
	               	<mx:DataGridColumn textAlign="center" headerText="{this.parentApplication.xResourceManager.getKeyValue('stl.label.cpbank')}" dataField="cpBankId"  visible="true" sortCompareFunction="sortUtil.sortString"/>
	               	<mx:DataGridColumn textAlign="center" headerText="{this.parentApplication.xResourceManager.getKeyValue('stl.label.cpsettleaccount')}" dataField="cpDisplayAccountNo"  visible="true" sortCompareFunction="sortUtil.sortString"/>
	               	<mx:DataGridColumn textAlign="center" headerText="{this.parentApplication.xResourceManager.getKeyValue('stl.label.contraiddeliveryinstruction')}" dataField="contraidDisplayName"  visible="true" sortCompareFunction="sortUtil.sortString"/>	               	
	               	<mx:DataGridColumn textAlign="center" headerText="{this.parentApplication.xResourceManager.getKeyValue('stl.label.settlementccy')}" dataField="ccyCode"  visible="true" sortCompareFunction="sortUtil.sortString"/>
	               	<mx:DataGridColumn textAlign="center" headerText="{this.parentApplication.xResourceManager.getKeyValue('stl.label.valuedate')}" dataField="valueDateStr" itemRenderer="com.nri.rui.core.renderers.NullValueRenderer" visible="true" sortCompareFunction="sortUtil.sortString"/>
	               	<mx:DataGridColumn textAlign="right" headerText="{this.parentApplication.xResourceManager.getKeyValue('stl.stlqry.label.outstandingamount')}" dataField="outstandingAmtStr"  visible="true" sortCompareFunction="sortUtil.sortString"/>
	               	<mx:DataGridColumn textAlign="right" headerText="{this.parentApplication.xResourceManager.getKeyValue('stl.stlqry.label.outstandingqnty')}" dataField="outstandingQntyStr"  visible="true" sortCompareFunction="sortUtil.sortString"/>
	               	<mx:DataGridColumn textAlign="center" headerText="{this.parentApplication.xResourceManager.getKeyValue('stl.label.inx.delrec')}" dataField="deliverReceiveDisplay"  visible="true" sortCompareFunction="sortUtil.sortString"/>
	               	<mx:DataGridColumn textAlign="center" headerText="{this.parentApplication.xResourceManager.getKeyValue('stl.label.employee')}" dataField="createdby"  visible="true" sortCompareFunction="sortUtil.sortString"/>	           
			    </mx:columns>
			 </mx:DataGrid>
			 
			 <mx:HBox width="100%" styleName="ButtonBackPanel" >
			 	<cntrls:XenosButton id="authorization" label="{this.parentApplication.xResourceManager.getKeyValue('stl.label.authorization')}" styleName="BtnStyle" click="showConfirmModule()" />			 	
			 </mx:HBox>	
			 		
		</mx:VBox>
		
	</mx:HDividedBox>
    </mx:VBox>    
    </mx:Canvas>
    		 
</containers:XenosQueryModule>
